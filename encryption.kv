#:import utils kivy.utils
# used for hex color... ex:
# utils.get_color_from_hex("#FFFFFF")
#: import NoTransition kivy.uix.screenmanager.NoTransition
#: import Factory kivy.factory.Factory


<ScreenManager>
    transition: NoTransition()
    HomeScreen:
    TextEncryption:
    FileEncryption:


<HomeScreen@Screen>
    name: "Home"
    BoxLayout:
        orientation: "vertical"
        Label:
            text: "Welcome to the Text Encryption App"
            font_size: "30"
        Button:
            on_release:
                Factory.MainSettings().open()
                root.manager.transition = NoTransition()
        BoxLayout:
            orientation: "horizontal"
            Button:
                text: "Text Encryption"
                font_size: "20"
                on_release:
                    app.root.current = "TextEncryption"
                    root.manager.transition = NoTransition()
            Button:
                text: "File Encryption"
                font_size: "20"
                on_release:
                    app.root.current = "FileEncryption"
                    root.manager.transition = NoTransition()


<MainSettings@ModalView>
    auto_dismiss: False
    name: "Settings"
    BoxLayout:
        orientation: "horizontal"
        Button:
            text: "Close"
            on_release:
                root.dismiss()
        Slider:
            id: slider
            min: 0
            max: 100
            step: 1
            orientation: "horizontal"
            value: app.root.block_size_var


<TextEncryption>
    name: "TextEncryption"
    BoxLayout:
        orientation: "horizontal"
        TextInput:
            id: input
        BoxLayout:
            size_hint_x: .25
            orientation: "vertical"
            Button:
                text: "Encrypt the text!"
                on_release: root.encrypt_text()
            Button:
                text: "Decrypt the text!"
                on_release: root.decrypt_text()


<FilePicker@ModalView>
    auto_dismiss: False
    name: "FilePicker"
    BoxLayout:
        orientation: "vertical"
        FileChooserListView:
            id: input
            path: "./"
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: .1
            Button:
                text: "Select"
                on_release:
                    Factory.FileEncryption().select_file(input.path, input.selection)
                    root.dismiss()
            Button:
                text: "Cancel"
                on_release: root.dismiss()


<FileEncryption>
    name: "FileEncryption"
    BoxLayout:
        orientation: "vertical"
        BoxLayout:
            orientation: "horizontal"
            Button:
                text: "Encrypt the file!"
                on_release: root.encrypt_file()
            Button:
                text: "Decrypt the file!"
                on_release: root.decrypt_file()
        Button:
            text: "Select a file to encrypt"
            on_release:
                Factory.FilePicker().open()
                root.manager.transition = NoTransition()
