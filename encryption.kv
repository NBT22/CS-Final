#:import utils kivy.utils
# used for hex color... ex:
# utils.get_color_from_hex("#FFFFFF")
#: import NoTransition kivy.uix.screenmanager.NoTransition
#: import Factory kivy.factory.Factory


#<ScreenManager>
#    transition: NoTransition()
#    HomeScreen:
#    TextEncryption:
#    FileEncryption:


<MainUI>:
    do_default_tab: False
    TabbedPanelItem:
        text: "Settings"
        BoxLayout:
            orientation: "vertical"
            BoxLayout:
                orientation: "horizontal"
                TextInput:
                    id: block_size
                    input_filter: "int"
                    multiline: False
                    text: str(root.block_size_var)
                TextInput:
                    id: encrypt_key_1
                    multiline: False
                    text: str(root.encrypt_key_1)
                TextInput:
                    id: encrypt_key_2
                    multiline: False
                    text: str(root.encrypt_key_2)
            BoxLayout:
                orientation: "horizontal"
                Button:
                    text: "Save Changes"
                    on_release:
                        root.save()
                Button:
                    text: "Discard Changes"
                    on_release:
                        root.discard()
    TabbedPanelItem:
        text: "Text\nEncryption"
        BoxLayout:
            orientation: "horizontal"
            TextInput:
                id: input
            BoxLayout:
                size_hint_x: .25
                orientation: "vertical"
                Button:
                    text: "Encrypt the text!"
                    on_release: root.encrypt_text()
                Button:
                    text: "Decrypt the text!"
                    on_release: root.decrypt_text()
    TabbedPanelItem:
        text: "File\nEncryption"
        BoxLayout:
            orientation: "vertical"
            BoxLayout:
                orientation: "horizontal"
                Button:
                    text: "Encrypt the file!"
                    on_release: root.encrypt_file()
                Button:
                    text: "Decrypt the file!"
                    on_release: root.decrypt_file()
            Button:
                text: "Select a file to encrypt"
                on_release:
                    Factory.FilePicker().open()


<FilePicker@ModalView>
    auto_dismiss: False
    name: "FilePicker"
    BoxLayout:
        orientation: "vertical"
        FileChooserListView:
            id: input
            path: "./"
        BoxLayout:
            orientation: "horizontal"
            size_hint_y: .1
            Button:
                text: "Select"
                on_release:
                    Factory.MainUI().select_file(input.path, input.selection)
                    root.dismiss()
            Button:
                text: "Cancel"
                on_release: root.dismiss()
